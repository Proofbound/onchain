<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ch13-challenges-and-solutions – The Crypto Business Solution</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../_resources/css/custom.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">The Crypto Business Solution</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../en/"> 
<span class="menu-text">English</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../zh/"> 
<span class="menu-text">中文</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-challenges-solutions" id="toc-sec-challenges-solutions" class="nav-link active" data-scroll-target="#sec-challenges-solutions">Challenges and Solutions</a>
  <ul class="collapse">
  <li><a href="#technical-barriers-user-experience-and-accessibility-issues" id="toc-technical-barriers-user-experience-and-accessibility-issues" class="nav-link" data-scroll-target="#technical-barriers-user-experience-and-accessibility-issues">Technical Barriers: User Experience and Accessibility Issues</a></li>
  <li><a href="#regulatory-concerns-compliance-and-legal-frameworks" id="toc-regulatory-concerns-compliance-and-legal-frameworks" class="nav-link" data-scroll-target="#regulatory-concerns-compliance-and-legal-frameworks">Regulatory Concerns: Compliance and Legal Frameworks</a></li>
  <li><a href="#adoption-challenges-overcoming-traditional-business-inertia" id="toc-adoption-challenges-overcoming-traditional-business-inertia" class="nav-link" data-scroll-target="#adoption-challenges-overcoming-traditional-business-inertia">Adoption Challenges: Overcoming Traditional Business Inertia</a></li>
  <li><a href="#scalability-solutions-handling-growth-without-compromising-principles" id="toc-scalability-solutions-handling-growth-without-compromising-principles" class="nav-link" data-scroll-target="#scalability-solutions-handling-growth-without-compromising-principles">Scalability Solutions: Handling Growth Without Compromising Principles</a></li>
  <li><a href="#risk-mitigation-protecting-participants-and-maintaining-trust" id="toc-risk-mitigation-protecting-participants-and-maintaining-trust" class="nav-link" data-scroll-target="#risk-mitigation-protecting-participants-and-maintaining-trust">Risk Mitigation: Protecting Participants and Maintaining Trust</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="sec-challenges-solutions" class="level1">
<h1>Challenges and Solutions</h1>
<p>Addressing potential obstacles and criticisms</p>
<p>The transition to OnChain Commerce systems, while promising significant benefits for participants and broader economic transformation, faces substantial challenges that must be acknowledged and systematically addressed to ensure successful adoption and sustainable development. These challenges span technical, regulatory, social, and economic dimensions that require comprehensive solutions developed through collaborative effort between technology developers, business practitioners, regulatory authorities, and community leaders.</p>
<p>Understanding these challenges and their potential solutions enables realistic planning and implementation strategies that can overcome obstacles while preserving the fundamental benefits that make OnChain Commerce attractive to participants. Rather than dismissing or minimizing these challenges, successful OnChain Commerce development requires honest assessment and systematic solution development that addresses legitimate concerns while maintaining the principles and mechanisms that create value for participants.</p>
<p>The challenges facing OnChain Commerce adoption are not insurmountable, but they require sustained effort, resources, and coordination among multiple stakeholders to resolve effectively. The solutions discussed in this chapter represent ongoing work rather than completed achievements, requiring continued development and refinement as OnChain Commerce systems evolve and scale.</p>
<section id="technical-barriers-user-experience-and-accessibility-issues" class="level2">
<h2 class="anchored" data-anchor-id="technical-barriers-user-experience-and-accessibility-issues">Technical Barriers: User Experience and Accessibility Issues</h2>
<p>The technical complexity inherent in blockchain systems, cryptocurrency transactions, and smart contract operations creates significant barriers to mainstream adoption among users who lack technical knowledge or comfort with digital systems. These barriers must be substantially reduced to enable widespread OnChain Commerce participation across diverse demographics and technical skill levels.</p>
<p>User interface complexity represents one of the most significant obstacles to OnChain Commerce adoption. Traditional cryptocurrency and blockchain applications often require users to manage private keys, understand gas fees, navigate complex wallet interfaces, and comprehend technical concepts that are unfamiliar and intimidating to most potential users. OnChain Commerce systems must provide interfaces that feel as simple and familiar as traditional e-commerce or mobile applications.</p>
<p>Solution development for user interface challenges focuses on abstraction layers that hide technical complexity while preserving the benefits of decentralized systems. Successful implementations utilize familiar web and mobile interfaces that handle blockchain transactions automatically, eliminating the need for users to understand or manage technical details. These solutions often involve progressive disclosure approaches that introduce advanced features gradually as users become more comfortable with basic functionality.</p>
<p>Device and connectivity requirements can exclude potential participants who lack access to modern smartphones, reliable internet connectivity, or sufficient data plans to support blockchain applications. OnChain Commerce systems must accommodate diverse technological access levels while maintaining security and functionality standards necessary for safe operation.</p>
<p>Accessibility solutions include offline capability development, low-bandwidth optimizations, and support for older devices that enables participation across diverse technological contexts. These solutions often involve hybrid approaches that combine online and offline functionality while maintaining synchronization with blockchain systems when connectivity is available.</p>
<p>Digital literacy barriers affect substantial portions of potential OnChain Commerce participants who may be comfortable with basic internet usage but lack familiarity with digital payments, mobile applications, or online account management. These barriers are particularly significant among older demographics and in regions with limited digital infrastructure development.</p>
<p>Educational and support solutions include comprehensive training programs, community mentorship systems, and simplified onboarding processes that gradually introduce users to OnChain Commerce functionality while providing ongoing assistance and support. These programs often utilize peer-to-peer learning approaches that leverage community relationships and local knowledge to overcome individual learning barriers.</p>
<p>Cross-platform compatibility challenges arise when OnChain Commerce systems must operate across different operating systems, browsers, and device types while maintaining consistent functionality and security standards. These compatibility requirements can increase development complexity while potentially creating performance or feature limitations.</p>
<p>Technical standardization efforts focus on developing common protocols and interfaces that enable seamless operation across diverse technical environments while reducing development complexity and improving user experience consistency. These standardization initiatives often involve collaboration between multiple OnChain Commerce platform providers and technology companies.</p>
</section>
<section id="regulatory-concerns-compliance-and-legal-frameworks" class="level2">
<h2 class="anchored" data-anchor-id="regulatory-concerns-compliance-and-legal-frameworks">Regulatory Concerns: Compliance and Legal Frameworks</h2>
<p>The regulatory environment surrounding blockchain technologies, cryptocurrency systems, and decentralized business models remains uncertain and fragmented across different jurisdictions, creating compliance challenges and legal risks that can impede OnChain Commerce adoption and operation. These regulatory concerns require systematic attention and collaborative solution development between OnChain Commerce participants and regulatory authorities.</p>
<p>Token classification uncertainty affects how OnChain Commerce systems must structure their operations to comply with securities regulations, money transmission laws, and consumer protection requirements. Different regulatory authorities may classify identical token systems differently, creating compliance conflicts and operational uncertainties that complicate business planning and legal compliance.</p>
<p>Solution approaches include proactive regulatory engagement, standardized compliance frameworks, and adaptive operational structures that can accommodate different regulatory interpretations while maintaining core OnChain Commerce functionality. These solutions often involve working with regulatory authorities to develop clear guidelines and safe harbor provisions that provide legal certainty for OnChain Commerce operations.</p>
<p>Cross-border regulatory coordination challenges arise when OnChain Commerce networks operate across multiple jurisdictions with different legal requirements and regulatory approaches. Participants may find themselves subject to conflicting legal obligations or uncertain about which regulations apply to their specific activities within global networks.</p>
<p>International harmonization efforts focus on developing common regulatory approaches and mutual recognition agreements that enable OnChain Commerce systems to operate across borders while maintaining appropriate consumer protections and regulatory oversight. These efforts often involve collaboration between regulatory authorities and international organizations to develop consistent frameworks.</p>
<p>Consumer protection implementation requires OnChain Commerce systems to provide appropriate disclosures, dispute resolution mechanisms, and participant protections while operating through decentralized systems that may not fit traditional regulatory categories. These protection requirements must be balanced against the efficiency and cost advantages that make OnChain Commerce attractive to participants.</p>
<p>Compliance innovation involves developing new approaches to consumer protection that work effectively within decentralized systems while meeting regulatory objectives for participant safety and fair treatment. These innovations often involve smart contract automation, community governance mechanisms, and hybrid centralized-decentralized structures that can provide effective protections.</p>
<p>Tax treatment clarification remains uncertain for many OnChain Commerce activities, particularly regarding token earning, appreciation, and utilization across different types of transactions and participant roles. These uncertainties can create compliance burdens and financial risks that discourage participation or complicate business operations.</p>
<p>Tax policy development requires collaboration between OnChain Commerce communities and tax authorities to develop clear guidance and practical compliance procedures that provide fair revenue collection while avoiding double taxation or excessive compliance burdens that might inhibit adoption.</p>
</section>
<section id="adoption-challenges-overcoming-traditional-business-inertia" class="level2">
<h2 class="anchored" data-anchor-id="adoption-challenges-overcoming-traditional-business-inertia">Adoption Challenges: Overcoming Traditional Business Inertia</h2>
<p>Traditional businesses and consumers often resist adopting new systems and processes, particularly those that involve unfamiliar technologies or require changes to established practices and relationships. Overcoming this adoption inertia requires systematic approaches that demonstrate clear benefits while minimizing disruption and risk for potential participants.</p>
<p>Risk aversion among potential participants stems from uncertainty about new technologies, concerns about financial loss, and unfamiliarity with decentralized business models that differ significantly from traditional commercial relationships. These concerns are often heightened by negative media coverage of cryptocurrency scams and technical failures that create generalized skepticism about blockchain-based systems.</p>
<p>Trust building solutions focus on transparency, education, and gradual implementation approaches that allow potential participants to experience OnChain Commerce benefits in low-risk environments before making larger commitments. These solutions often involve pilot programs, educational workshops, and demonstration projects that provide concrete evidence of benefits while addressing specific concerns and questions.</p>
<p>Competitive resistance from established platforms and businesses can create obstacles to OnChain Commerce adoption through restrictive policies, legal challenges, or marketing campaigns that discourage participation in alternative systems. Traditional businesses may view OnChain Commerce as threats to their market positions rather than opportunities for improvement.</p>
<p>Market development strategies include demonstration of complementary benefits, partnership opportunities, and competitive advantages that position OnChain Commerce as value creation rather than value extraction. These strategies often focus on expanding market opportunities rather than simply displacing existing businesses.</p>
<p>Network effects requirements mean that OnChain Commerce systems often need substantial numbers of participants to provide meaningful benefits, creating adoption challenges where early participants may not experience full value until networks reach critical mass. This creates timing coordination problems that can slow adoption and discourage early participation.</p>
<p>Community building and incentive alignment solutions focus on providing meaningful benefits for early participants while creating clear pathways to network growth that benefit all participants. These solutions often involve enhanced rewards for early adoption, community development grants, and marketing support that accelerates network growth.</p>
<p>Integration complexity with existing business systems can create implementation barriers for merchants and service providers who need to coordinate OnChain Commerce participation with established operational procedures, accounting systems, and customer relationship management practices.</p>
<p>Implementation support services include technical assistance, training programs, and integration tools that simplify OnChain Commerce adoption while minimizing disruption to existing business operations. These services often provide gradual implementation pathways that enable businesses to test and optimize OnChain Commerce participation before full integration.</p>
</section>
<section id="scalability-solutions-handling-growth-without-compromising-principles" class="level2">
<h2 class="anchored" data-anchor-id="scalability-solutions-handling-growth-without-compromising-principles">Scalability Solutions: Handling Growth Without Compromising Principles</h2>
<p>OnChain Commerce systems must be able to scale from small local networks to global operations involving millions of participants while maintaining the decentralization, transparency, and collaborative principles that create their distinctive benefits. This scaling challenge requires technical, organizational, and governance solutions that preserve core values while enabling practical operation at large scale.</p>
<p>Technical scalability limitations in blockchain systems can create transaction processing bottlenecks, increased costs, and slower settlement times as networks grow in size and activity. These limitations can undermine user experience and economic efficiency that are essential for mainstream adoption and sustainable operation.</p>
<p>Infrastructure development solutions include layer-two scaling technologies, optimized blockchain protocols, and hybrid architectures that can handle large transaction volumes while maintaining security and decentralization characteristics. These solutions often involve ongoing research and development to improve blockchain efficiency and capacity.</p>
<p>Governance scalability challenges arise when democratic decision-making processes that work effectively for small communities become unwieldy and inefficient as networks grow to include thousands or millions of participants. Traditional governance mechanisms may become too slow or complex for effective operation at large scale.</p>
<p>Governance innovation involves developing new approaches to democratic participation that can operate effectively at scale while preserving meaningful participant influence and network responsiveness. These innovations often include representative systems, delegated governance, and automated decision-making processes that balance efficiency with democratic participation.</p>
<p>Quality control maintenance becomes more difficult as networks grow and include larger numbers of participants with varying levels of commitment, understanding, and adherence to community standards. Maintaining service quality and participant satisfaction requires systematic approaches that can scale with network growth.</p>
<p>Quality assurance solutions include automated monitoring systems, community moderation mechanisms, and reputation systems that can identify and address quality issues efficiently while preserving the collaborative relationships that define successful OnChain Commerce communities.</p>
<p>Geographic coordination complexity increases as networks expand across different time zones, languages, cultures, and regulatory environments while maintaining operational coherence and shared identity. These coordination challenges can strain communication and decision-making processes that are essential for network effectiveness.</p>
<p>Regional structure development involves creating organizational models that balance local autonomy with global coordination while preserving network coherence and shared standards. These models often involve federated structures that enable local adaptation while maintaining network-wide compatibility and cooperation.</p>
</section>
<section id="risk-mitigation-protecting-participants-and-maintaining-trust" class="level2">
<h2 class="anchored" data-anchor-id="risk-mitigation-protecting-participants-and-maintaining-trust">Risk Mitigation: Protecting Participants and Maintaining Trust</h2>
<p>OnChain Commerce systems must address various risks that could harm participants or undermine network integrity, including technical risks, financial risks, operational risks, and social risks that require systematic mitigation strategies to maintain participant confidence and network sustainability.</p>
<p>Smart contract vulnerabilities represent significant technical risks because programming errors or design flaws in automated systems can cause financial losses or operational failures that affect large numbers of participants. These vulnerabilities are particularly concerning because smart contract code is often difficult to modify after deployment.</p>
<p>Security solution development includes comprehensive code auditing, formal verification methods, gradual deployment procedures, and emergency response protocols that can identify and address security issues before they cause significant harm. These solutions often involve collaboration between security experts, developers, and community members to maintain robust protection systems.</p>
<p>Financial risk management must address token value volatility, reserve fund adequacy, and participant over-investment that could cause financial losses or system instability. These risks are particularly significant for participants who may not fully understand the investment characteristics of token-based systems.</p>
<p>Financial protection mechanisms include reserve backing requirements, investment limits, educational requirements, and insurance systems that can protect participants against financial losses while maintaining the economic benefits that make OnChain Commerce attractive. These mechanisms often involve balancing protection with accessibility to avoid excluding potential participants.</p>
<p>Fraud and manipulation prevention becomes more challenging in decentralized systems where traditional oversight and control mechanisms may not apply effectively. Bad actors may attempt to exploit OnChain Commerce systems through various schemes that harm other participants while appearing to operate legitimately.</p>
<p>Trust and verification systems include identity verification, reputation tracking, community reporting mechanisms, and automated fraud detection that can identify and prevent malicious activities while preserving privacy and operational efficiency. These systems often rely on community participation and algorithmic monitoring to maintain network integrity.</p>
<p>Operational risk management addresses system failures, governance disputes, and coordination breakdowns that could disrupt network operations or damage participant relationships. These risks increase as networks grow in size and complexity while involving larger numbers of participants with diverse interests and capabilities.</p>
<p>Resilience and recovery planning includes backup systems, dispute resolution procedures, emergency governance protocols, and communication systems that can maintain network operations and participant confidence during challenging circumstances. These plans often involve scenario planning and stress testing to identify potential problems before they occur.</p>
<p>The systematic identification and resolution of challenges facing OnChain Commerce adoption represents ongoing work that requires sustained effort and collaboration among multiple stakeholders. As we will explore in Chapter 14, addressing these challenges effectively while maintaining the principles and benefits that make OnChain Commerce valuable provides the foundation for successful global adoption and the transformation of commercial activity toward more equitable and sustainable models.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2025 Global Business Chain, Inc. <br> <a href="en/">English</a> | <a href="zh/">中文</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>